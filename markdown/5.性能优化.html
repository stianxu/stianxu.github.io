<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化 | 我的博客</title>
    <meta name="description" content="我的博客.">
    <link rel="preload stylesheet" href="/assets/style.b4b70dfd.css" as="style">
    <link rel="modulepreload" href="/assets/app.3074115f.js">
    <link rel="modulepreload" href="/assets/markdown_5.性能优化.md.62a0f8c8.lean.js">
    
    <link rel="icon">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-61a43f16><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c6bbf2d9></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c6bbf2d9> Skip to content </a><!--]--><!----><header class="VPNav" data-v-61a43f16 data-v-1040bb9c><div class="VPNavBar has-sidebar" data-v-1040bb9c data-v-51805c65><div class="container" data-v-51805c65><div class="title" data-v-51805c65><div class="VPNavBarTitle has-sidebar" data-v-51805c65 data-v-c2d27cca><a class="title" href="/" data-v-c2d27cca><!--[--><!--]--><!----><!--[-->我的博客<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-51805c65><div class="curtain" data-v-51805c65></div><div class="content-body" data-v-51805c65><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-51805c65 data-v-fde91152><span id="main-nav-aria-label" class="visually-hidden" data-v-fde91152>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" data-v-fde91152 data-v-e5b11a5b data-v-b05a94e2><!--[-->首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/markdown/1.HTML.html" data-v-fde91152 data-v-e5b11a5b data-v-b05a94e2><!--[-->前端知识<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-51805c65 data-v-3c1281f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-3c1281f2 data-v-c1cd5a56 data-v-2cde1fd1><span class="check" data-v-2cde1fd1><span class="icon" data-v-2cde1fd1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c1cd5a56><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c1cd5a56><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-51805c65 data-v-538e7547 data-v-b514cd9c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b514cd9c><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-b514cd9c><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-b514cd9c><div class="VPMenu" data-v-b514cd9c data-v-191321a5><!----><!--[--><!--[--><!----><div class="group" data-v-538e7547><div class="item appearance" data-v-538e7547><p class="label" data-v-538e7547>Appearance</p><div class="appearance-action" data-v-538e7547><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-538e7547 data-v-c1cd5a56 data-v-2cde1fd1><span class="check" data-v-2cde1fd1><span class="icon" data-v-2cde1fd1><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-c1cd5a56><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-c1cd5a56><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-51805c65 data-v-2165135d><span class="container" data-v-2165135d><span class="top" data-v-2165135d></span><span class="middle" data-v-2165135d></span><span class="bottom" data-v-2165135d></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-61a43f16 data-v-24f663a9><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-24f663a9><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-24f663a9><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-24f663a9>Menu</span></button><a class="top-link" href="#" data-v-24f663a9>Return to top</a></div><aside class="VPSidebar" data-v-61a43f16 data-v-dc4096f0><div class="curtain" data-v-dc4096f0></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-dc4096f0><span class="visually-hidden" id="sidebar-aria-label" data-v-dc4096f0> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-dc4096f0><section class="VPSidebarItem level-0 has-active" data-v-dc4096f0 data-v-ae5a8ee1><!----><div class="items" data-v-ae5a8ee1><!--[--><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/1.HTML.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>HTML</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/2.CSS.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>CSS</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/3.JavaScript.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>JS</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/4.Vue.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>Vue</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/5.%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>性能优化</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/6.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>前端工程化</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/7.%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>计算机网络</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-ae5a8ee1 data-v-ae5a8ee1><div class="item" data-v-ae5a8ee1><div class="indicator" data-v-ae5a8ee1></div><a class="VPLink link link" href="/markdown/8.%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86.html" data-v-ae5a8ee1 data-v-b05a94e2><!--[--><p class="text" data-v-ae5a8ee1>浏览器原理</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-61a43f16 data-v-4b953067><div class="VPDoc has-sidebar has-aside" data-v-4b953067 data-v-5bc2246b><div class="container" data-v-5bc2246b><div class="aside" data-v-5bc2246b><div class="aside-curtain" data-v-5bc2246b></div><div class="aside-container" data-v-5bc2246b><div class="aside-content" data-v-5bc2246b><div class="VPDocAside" data-v-5bc2246b data-v-b0fc0dc2><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-b0fc0dc2 data-v-9efb32df><div class="content" data-v-9efb32df><div class="outline-marker" data-v-9efb32df></div><div class="outline-title" data-v-9efb32df>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-9efb32df><span class="visually-hidden" id="doc-outline-aria-label" data-v-9efb32df> Table of Contents for current page </span><ul class="root" data-v-9efb32df data-v-3e7dc4a9><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-b0fc0dc2></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-5bc2246b><div class="content-container" data-v-5bc2246b><!--[--><!--]--><main class="main" data-v-5bc2246b><div style="position:relative;" class="vp-doc _markdown_5_%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" data-v-5bc2246b><div><h1 id="性能优化" tabindex="-1">性能优化 <a class="header-anchor" href="#性能优化" aria-hidden="true">#</a></h1><h2 id="cdn-的概念" tabindex="-1">CDN 的概念 <a class="header-anchor" href="#cdn-的概念" aria-hidden="true">#</a></h2><p><strong>CDN</strong></p><ul><li>CDN（Content Delivery Network，<strong>内容分发网络</strong>）是指一种通过互联网互相连接的电脑网络系统，利用最靠近每位用户的服务器，更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户，来提供高性能、可扩展性及低成本的网络内容传递给用户。</li></ul><p><strong>CDN 的作用</strong></p><ul><li>CDN 一般会用来托管 Web 资源（包括文本、图片和脚本等），可供下载的资源（媒体文件、软件、文档等），应用程序（门户网站等）。使用 CDN 来加速这些资源的访问。</li></ul><p><strong>在性能方面，引入 CDN 的作用</strong></p><ul><li>用户收到的内容来自最近的数据中心，延迟更低，内容加载更快</li><li>部分资源请求分配给了CDN，减少了服务器的负载</li></ul><p><strong>在安全方面，CDN 有助于防御 DDoS、MITM 等网络攻击</strong></p><ul><li>针对DDoS：通过监控分析异常流量，限制其请求频率</li><li>针对MITM：从源服务器到 CDN 节点到 ISP（Internet Service Provider），全链路 HTTPS 通信</li></ul><p><strong>其他方面</strong></p><ul><li>CDN 作为一种基础的云服务，同样具有资源托管、按需扩展（能够应对流量高峰）等方面的优势。</li></ul><h2 id="cdn-的使用场景" tabindex="-1">CDN 的使用场景 <a class="header-anchor" href="#cdn-的使用场景" aria-hidden="true">#</a></h2><p><strong>使用第三方的 CDN 服务</strong></p><ul><li>如果想要开源一些项目，可以使用第三方的 CDN 服务</li></ul><p><strong>使用 CDN 进行静态资源的缓存</strong></p><ul><li>将自己网站的静态资源放在CDN上，比如 JS、CSS、图片等。可以将整个项目放在 CDN 上，完成一键部署。</li></ul><h2 id="懒加载的概念" tabindex="-1">懒加载的概念 <a class="header-anchor" href="#懒加载的概念" aria-hidden="true">#</a></h2><p><strong>懒加载</strong></p><ul><li><p>懒加载也叫做延迟加载、按需加载，指的是在长网页中延迟加载图片数据，是一种较好的网页性能优化的方式。在比较长的网页或应用中，如果图片很多，所有的图片都被加载出来，而用户只能看到可视窗口的那一部分图片数据，这样就浪费了性能。</p></li><li><p>如果使用图片的懒加载就可以解决以上问题。在滚动屏幕之前，可视化区域之外的图片不会进行加载，在滚动屏幕时才加载。这样使得网页的加载速度更快，减少了服务器的负载。懒加载适用于图片较多，页面列表较长（长列表）的场景中。</p></li></ul><h2 id="懒加载的特点" tabindex="-1">懒加载的特点 <a class="header-anchor" href="#懒加载的特点" aria-hidden="true">#</a></h2><p><strong>懒加载特点</strong></p><ul><li><p><strong>减少无用资源的加载</strong></p><ul><li>使用懒加载明显减少了服务器的压力和流量，同时也减小了浏览器的负担。</li></ul></li><li><p><strong>提升用户体验</strong></p><ul><li>如果同时加载较多图片，可能需要等待的时间较长，这样影响了用户体验，而使用懒加载就能大大的提高用户体验。</li></ul></li><li><p><strong>防止加载过多图片而影响其他资源文件的加载</strong></p><ul><li>会影响网站应用的正常使用。</li></ul></li></ul><h2 id="懒加载的实现原理" tabindex="-1">懒加载的实现原理 <a class="header-anchor" href="#懒加载的实现原理" aria-hidden="true">#</a></h2><p><strong>懒加载实现原理</strong></p><ul><li>图片的加载是由<code>src</code>引起的，当对<code>src</code>赋值时，浏览器就会请求图片资源。根据这个原理，我们使用 HTML5 的<code>data-xxx</code>属性来储存图片的路径，在需要加载图片的时候，将<code>data-xxx</code>中图片的路径赋值给<code>src</code>，这样就实现了图片的按需加载，即懒加载。</li></ul><p><strong>注意点</strong></p><ul><li><p><code>data-xxx</code> 中的<code>xxx</code>可以自定义，这里我们使用<code>data-src</code>来定义。</p></li><li><p>懒加载的实现重点在于确定用户需要加载哪张图片，在浏览器中，可视区域内的资源就是用户需要的资源。所以当图片出现在可视区域时，获取图片的真实地址并赋值给图片即可。</p></li></ul><h2 id="懒加载与预加载的区别" tabindex="-1">懒加载与预加载的区别 <a class="header-anchor" href="#懒加载与预加载的区别" aria-hidden="true">#</a></h2><ul><li><strong>一个是提前加载，一个是迟缓甚至不加载</strong><ul><li>这两种方式都是提高网页性能的方式，两者主要区别是一个是提前加载，一个是迟缓甚至不加载。懒加载对服务器前端有一定的缓解压力作用，预加载则会增加服务器前端压力。</li></ul></li></ul><ul><li><p><strong>懒加载也叫延迟加载，指的是在长网页中延迟加载图片的时机，当用户需要访问时，再去加载</strong></p><ul><li>这样可以提高网站的首屏加载速度，提升用户的体验，并且可以减少服务器的压力。它适用于图片很多，页面很长的电商网站的场景。懒加载的实现原理是，将页面上的图片的 src 属性设置为空字符串，将图片的真实路径保存在一个自定义属性中，当页面滚动的时候，进行判断，如果图片进入页面可视区域内，则从自定义属性中取出真实路径赋值给图片的 src 属性，以此来实现图片的延迟加载。</li></ul></li><li><p><strong>预加载指的是将所需的资源提前请求加载到本地，这样后面在需要用到时就直接从缓存取资源。</strong></p><ul><li>通过预加载能够减少用户的等待时间，提高用户的体验。我了解的预加载的最常用的方式是使用 JS 中的 image 对象，通过为 image 对象来设置 src 属性，来实现图片的预加载。</li></ul></li></ul><h2 id="回流与重绘的概念及触发条件" tabindex="-1">回流与重绘的概念及触发条件 <a class="header-anchor" href="#回流与重绘的概念及触发条件" aria-hidden="true">#</a></h2><p><strong>回流</strong></p><ul><li>当渲染树中部分或者全部元素的尺寸、结构或者属性发生变化时，浏览器会重新渲染部分或者全部文档的过程就称为<strong>回流</strong>。</li></ul><p><strong>会导致回流的操作</strong></p><ul><li>页面的首次渲染</li><li>浏览器的窗口大小发生变化</li><li>元素的内容发生变化</li><li>元素的尺寸或者位置发生变化</li><li>元素的字体大小发生变化</li><li>激活 CSS 伪类</li><li>查询某些属性或者调用某些方法</li><li>添加或者删除可见的 DOM 元素</li></ul><p><strong>回流影响范围</strong></p><ul><li><p>在触发回流（重排）的时候，由于浏览器渲染页面是基于流式布局的，所以当触发回流时，会导致周围的 DOM 元素重新排列，它的影响范围有两种</p><ul><li><p>全局范围：从根节点开始，对整个渲染树进行重新布局</p></li><li><p>局部范围：对渲染树的某部分或者一个渲染对象进行重新布局</p></li></ul></li></ul><p><strong>重绘</strong></p><ul><li>当页面中某些元素的样式发生变化，但是不会影响其在文档流中的位置时，浏览器就会对元素进行重新绘制，这个过程就是<strong>重绘</strong>。</li></ul><p><strong>会导致重绘的操作</strong></p><ul><li>color、background 相关属性：background-color、background-image 等</li><li>outline 相关属性：outline-color、outline-width 、text-decoration</li><li>border-radius、visibility、box-shadow</li></ul><p><strong>注意点</strong></p><ul><li><strong>当触发回流时，一定会触发重绘，但是重绘不一定会引发回流。</strong></li></ul><h2 id="如何避免回流与重绘" tabindex="-1">如何避免回流与重绘 <a class="header-anchor" href="#如何避免回流与重绘" aria-hidden="true">#</a></h2><p><strong>减少回流与重绘的措施</strong></p><ul><li>操作 DOM 时，尽量在低层级的 DOM 节点进行操作。</li><li>不要使用<code>table</code>布局， 一个小的改动可能会使整个<code>table</code>进行重新布局。</li><li>使用 CSS 的表达式。</li><li>不要频繁操作元素的样式，对于静态页面，可以修改类名，而不是样式。</li><li>使用 absolute 或者 fixed，使元素脱离文档流，这样他们发生变化就不会影响其他元素。</li><li>将元素先设置<code>display: none</code>，操作结束后再把它显示出来。因为在 display 属性为 none 的元素上进行的DOM操作不会引发回流和重绘。</li><li>将 DOM 的多个读操作（或者写操作）放在一起，而不是读写操作穿插着写。这得益于<strong>浏览器的渲染队列机制</strong>。</li></ul><p><strong>浏览器优化 - 渲染队列</strong></p><ul><li><p>浏览器针对页面的回流与重绘，进行了自身的优化——<strong>渲染队列</strong></p></li><li><p><strong>浏览器会将所有的回流、重绘的操作放在一个队列中，当队列中的操作到了一定的数量或者到了一定的时间间隔，浏览器就会对队列进行批处理。这样就会让多次的回流、重绘变成一次回流重绘。</strong></p></li><li><p>将多个读操作（或者写操作）放在一起，就会等所有的读操作进入队列之后执行，这样，原本应该是触发多次回流，变成了只触发一次回流。</p></li></ul><h2 id="对节流与防抖的理解" tabindex="-1">对节流与防抖的理解 <a class="header-anchor" href="#对节流与防抖的理解" aria-hidden="true">#</a></h2><p><strong>节流和防抖</strong></p><ul><li>函数防抖是指在事件被触发 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。这可以使用在一些点击请求的事件上，避免因为用户的多次点击向后端发送多次请求。</li><li>函数节流是指规定一个单位时间，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内某事件被触发多次，只有一次能生效。节流可以使用在 scroll 函数的事件监听上，通过事件节流来降低事件调用的频率。</li></ul><p><strong>防抖函数的应用场景</strong></p><ul><li>按钮提交场景：防⽌多次提交按钮，只执⾏最后提交的⼀次</li><li>服务端验证场景：表单验证需要服务端配合，只执⾏⼀段连续的输⼊事件的最后⼀次，类似搜索联想词功能</li></ul><p><strong>节流函数的适⽤场景</strong></p><ul><li>拖拽场景：固定时间内只执⾏⼀次，防⽌超⾼频次触发位置变动</li><li>动画场景：避免短时间内多次触发动画引起性能问题</li></ul><h2 id="实现节流函数和防抖函数" tabindex="-1">实现节流函数和防抖函数 <a class="header-anchor" href="#实现节流函数和防抖函数" aria-hidden="true">#</a></h2><p><strong>函数防抖的实现</strong></p><ul><li><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">debounce</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">fn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">wait</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果此时存在定时器的话，则取消之前的定时器重新记时</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">clearTimeout</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置定时器，使事件间隔指定事件后执行</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">fn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wait</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></li></ul><p><strong>函数节流的实现</strong></p><ul><li><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 时间戳版</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">throttle</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">fn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">delay</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">preTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">now</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">nowTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">now</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果两次时间间隔超过了指定时间，则执行函数。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">nowTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">preTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">delay</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">preTime</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">now</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 定时器版</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">throttle</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">fun</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">wait</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">context</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">setTimeout</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">fun</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">apply</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">context</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">timeout</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wait</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></li></ul><h2 id="对项目中的图片进行优化" tabindex="-1">对项目中的图片进行优化 <a class="header-anchor" href="#对项目中的图片进行优化" aria-hidden="true">#</a></h2><p><strong>图片优化</strong></p><ul><li><p>不用图片。很多时候会使用到很多修饰类图片，其实这类修饰图片完全可以用 CSS 去代替。</p></li><li><p>对于移动端来说，屏幕宽度就那么点，完全没有必要去加载原图浪费带宽。一般图片都用 CDN 加载，可以计算出适配屏幕的宽度，然后去请求相应裁剪好的图片。</p></li><li><p>小图使用 base64 格式</p></li><li><p>将多个图标文件整合到一张图片中（雪碧图）</p></li><li><p>选择正确的图片格式</p><ul><li><p>对于能够显示 WebP 格式的浏览器尽量使用 WebP 格式。因为 WebP 格式具有更好的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量，缺点就是兼容性并不好</p></li><li><p>小图使用 PNG，其实对于大部分图标这类图片，完全可以使用 SVG 代替</p></li><li><p>照片使用 JPEG</p></li></ul></li></ul><h2 id="用-webpack-来优化前端性能" tabindex="-1">⽤ <strong>webpack</strong> 来优化前端性能 <a class="header-anchor" href="#用-webpack-来优化前端性能" aria-hidden="true">#</a></h2><p><strong>优化 webpack 的输出结果，让打包的最终结果在浏览器运⾏快速⾼效。</strong></p><ul><li><p><strong>压缩代码</strong></p><ul><li>删除多余的代码、注释、简化代码的写法等⽅式。可以利⽤ webpack 的 UglifyJsPlugin 和 ParallelUglifyPlugin 来压缩JS⽂件， 利⽤ cssnano 来压缩 css。</li></ul></li><li><p><strong>利⽤</strong>CDN <strong>加速</strong></p><ul><li>在构建过程中，将引⽤的静态资源路径修改为 CDN 上对应的路径。可以利⽤ webpack 对于 output 参数和各 loader 的 publicPath 参数来修改资源路径。</li></ul></li></ul><p><strong>路由页面按需加载</strong></p><ul><li><p>在开发 SPA 项目的时候，项目中都会存在很多路由页面。如果将这些页面全部打包进一个 JS 文件的话，虽然将多个请求合并了，但是同样也加载了很多并不需要的代码，耗费了更长的时间。那么为了首页能更快地呈现给用户，希望首页能加载的文件体积越小越好，<strong>这时候就可以使用按需加载，将每个路由页面单独打包为一个文件</strong>。当然不仅仅路由可以按需加载，对于 <code>loadash</code> 这种大型类库同样可以使用这个功能。</p></li><li><p>使用的时候再去下载对应文件，返回一个 <code>Promise</code>，当 <code>Promise</code> 成功以后去执行回调。</p></li></ul></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-5bc2246b data-v-6bbb630f><!----><div class="prev-next" data-v-6bbb630f><div class="pager" data-v-6bbb630f><a class="pager-link prev" href="/markdown/4.Vue.html" data-v-6bbb630f><span class="desc" data-v-6bbb630f>Previous page</span><span class="title" data-v-6bbb630f>Vue</span></a></div><div class="has-prev pager" data-v-6bbb630f><a class="pager-link next" href="/markdown/6.%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-6bbb630f><span class="desc" data-v-6bbb630f>Next page</span><span class="title" data-v-6bbb630f>前端工程化</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"8e6396b2\",\"markdown_1.html.md\":\"e5183ecf\",\"markdown_8.浏览器原理.md\":\"7cd877b6\",\"markdown_5.性能优化.md\":\"62a0f8c8\",\"markdown_2.css.md\":\"be6c6ec2\",\"markdown_7.计算机网络.md\":\"f9a2a910\",\"markdown_6.前端工程化.md\":\"e8c35f8f\",\"markdown_3.javascript.md\":\"4015117b\",\"markdown_4.vue.md\":\"262634e4\"}")</script>
    <script type="module" async src="/assets/app.3074115f.js"></script>
    
  </body>
</html>